{% extends "base.html" %}

{% block title %}{{species}} Gene{% endblock title %}

{% block content %}

{% load static %}
{% include 'web_app/components/atlas_selection.html' %}

<div class="container">

{% include 'web_app/components/gene_selection.html' with genes=gene_list selected=query.gene %}

{% if query.gene %}
    <div class="float-end"> {% include 'web_app/components/clipboard_button.html' %} </div>
    {{query.gene}}

    <h1 class="h3 pt-2" id="expression">Gene expression</h1>

    <!-- Use column due to vega-lite's bug with containers for concatenated plots -->
    <div class="row">
        <div class="col-8 col-md-9 col-lg-10">
            <div id="bar-plot" class="container" style="aspect-ratio: 4/1;"></div>
        </div>
    </div>

    <script type="text/javascript" src="{% static 'web_app/js/barplot.js' %}"></script>
    <script type="text/javascript">
    	createExpressionBarPlot("#bar-plot", '{{query.gene}}', {{gene_data|safe}})
    </script>
{% else %}
    <div class="row">
        <div class="col-auto" style="width: 350px; display: flex; justify-content: space-around; align-items: baseline;">
            <span class="placeholder" style="width: 20px; height: 200px;"></span>
            <span class="placeholder" style="width: 20px; height: 130px;"></span>
            <span class="placeholder" style="width: 20px; height: 120px;"></span>
            <span class="placeholder" style="width: 20px; height: 160px;"></span>
            <span class="placeholder" style="width: 20px; height: 175px;"></span>
            <span class="placeholder" style="width: 20px; height: 210px;"></span>
            <span class="placeholder" style="width: 20px; height: 120px;"></span>
            <span class="placeholder" style="width: 20px; height: 160px;"></span>
            <span class="placeholder" style="width: 20px; height: 130px;"></span>
            <span class="placeholder" style="width: 20px; height: 160px;"></span>
            <span class="placeholder" style="width: 20px; height: 120px;"></span>
        </div>
        <div class="col-auto">
            <span class="placeholder" style="height: .5em; width: 100px;"></span></br>
            
            <span class="placeholder" style="height: .5em; width: .5em;"></span>
            <span class="placeholder" style="height: .5em; width: 60px;"></span></br>
            
            <span class="placeholder" style="height: .5em; width: .5em;"></span>
            <span class="placeholder" style="height: .5em; width: 40px;"></span></br>
            
            <span class="placeholder" style="height: .5em; width: .5em;"></span>
            <span class="placeholder" style="height: .5em; width: 50px;"></span></br>
            
            <span class="placeholder" style="height: .5em; width: .5em;"></span>
            <span class="placeholder" style="height: .5em; width: 60px;"></span>
        </div>
    </div>
{% endif %}

{% endblock content %}